# Corp SSH Helper configuration
#
# =========================================================
# This configuration requires a socket dir. Create it with:
#
# $ mkdir ~/.ssh/sockets
# =========================================================
#
# *  See go/corp-ssh-helper for more info and example configs.
# *  For proxy info from corp-ssh-helper, add the --stderrthreshold=INFO option.


# Use ControlMaster for Google hosts. Default to a "proxy" control path.
Match host *.corp.google.com,*.c.googlers.com
  ControlMaster auto
  ControlPersist yes
  ControlPath ~/.ssh/sockets/proxy_%r@%h:%p


# Off corp network proxy commands.
Match host *.corp.google.com exec "curl -sI https://uberproxy-debug.corp.google.com/oncorp | grep -i -q 'Location:.*/no'"
  ProxyCommand corp-ssh-helper %h %p

Match host *.c.googlers.com exec "curl -sI https://uberproxy-debug.corp.google.com/oncorp | grep -i -q 'Location:.*/no'"
  ProxyCommand corp-ssh-helper -relay=sup-ssh-relay.corp.google.com %h %p


# On corp network proxy commands and control paths.
Match host *.corp.google.com,*.c.googlers.com exec "curl -sI https://uberproxy-debug.corp.google.com/oncorp | grep -i -q 'Location:.*/yes'"
  ControlPath ~/.ssh/sockets/%r@%h:%p
  ProxyCommand none


Host raspberrypi.local
  HostName raspberrypi.local
  User pi
  IdentityFile ~/.ssh/id_rsa
